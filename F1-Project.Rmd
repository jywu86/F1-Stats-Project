---
title: "F1 Project (E109"
author: "John Wu and Scotty Smith"
date: "4/22/2022"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Background and Purpose

The purpose of this project is to use machine learning to understand the effect of individual drivers and their relative value.  In the world of Formula 1 the performance of an individual depends on both the maximum performance of the car and the maximum performance of a driver.  The driver salary can range anywhere between 700k to 40 million dollars per year.  

This project goal is to find out if there is a large discernible difference between the drivers and if you were to manage an F1 team with limited budget constraints, what kind of strategy would be ideal. 

# The Data and Wrangling (and a little bit of background)

The data used for this project was a mixture of a public dataset from Kaggle (https://www.kaggle.com/datasets/rohanrao/formula-1-world-championship-1950-2020) with further enrichment from a package FastF1 (https://theoehrly.github.io/Fast-F1/).

This data was broken down into multiple sheets with cross referenced ids and had data available for races from 1950 to 2020.  The sheets are broken down into mainly two types of sheets: reference sheets and result sheets.  We will be using result type of sheets to build our models.  

### Race Weekend
A typical Formula 1 race weekend consists of 3 types of days: practice, qualify, and race.  Practice data is not captured in this dataset and are excluded.  Qualify is the portion of the weekend where drivers and teams put on their fastest set-up for the track and try to set the fastest lap.  The quickest cars get to start at the front of the grid on race day.  The race day is the main event where drivers line up in the order they qualified on and execute on a given strategy.  Each team is allowed to have 2 drivers in similar vehicles and the race is on. 

### Types of Tracks
Unlike basketball, football, or more traditional sports; track differences tend to favor certain types of cars more favorably than others.  For example Monza circuit (shown below) is known to be one of the fastest circuits with an average speed of 162 mph and a distance of 3.6 miles per lap.  These types of tracks favor teams with powerful engines and lower drag.   

![Monza Race Track in Italy.]images/monza_circuit.jpg

In contrast there are tracks such as Monaco, where the average speed is 104 and a distance of 2 miles per lap as well as tight 90 degree corners.  Cars that perform favorably in these conditions are usually shorter, higher, and more nimble.  


![Monaco Street Track in Italy.]images/monaco_circuit.jpg

To categorize these tracks, the average speed for all qualifying laps from 2018 to 2021 was used.  

A breakdown of these speeds is shown below.  We can clearly see that Monaco and Monza are the slowest and fastest tracks per average speed on this distribution. 
```{r , echo=FALSE}

```
To simply our split, we split the tracks above an average speed of 140 mph to be high speed tracks and everything below to be low speed tracks. 



# Data Filtering
Formula 1 is broken down into separate eras of similar cars based on their technology.  We would like to compare as simlar cars as possible so the era chosen was the most recent era called the "Turbo-Hybrid" era which comes from the use of a hybrid engine along with turbos and stems from 2014 to 2020.  

The dataset is broken up into qualifying.csv - this outlines all the times and laps set in 

The inital dataset did not include weather and telemetry (e.g. full throttle, braking) data which was later enriched through our script in "Data_Enchancements.py".  

## Data Preparation





# Scotty portion
- Classifying tracks based on average speed
- Clean up data with only dry and find average speed for that track across all 4 years.  
- Remove bottom quartile of qualifying. 
- After removing rain, if there are any tracks that do not have 2 races in the 4 years.
```{r , echo=FALSE}
#circuit <- read_csv("Circuits_AVG_Top10Dry.csv")
#avg_speed <- as.vector(circuit$Avg_Speed_MPH)
#hist(avg_speed,breaks = 80)

```



# John
- Add justification in the write-up.  
- Write up justifications for classification based on distribution.
- Add classified data to qualifying data to prepare for modeling in qualifying.
- Prep data for modeling (factoring team/car)


# Next week
- Come up with two models that can be used to predict qualifying



## The Methods





```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
